(()=>{var e={401:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},699:(e,t)=>{var r={},n={},o={};t.setCrypto=function(e){r.crypto=e},"undefined"!=typeof crypto&&t.setCrypto(crypto),"function"!=typeof atob&&(atob=function(e){return new Buffer(e,"base64").toString("binary")}),"function"!=typeof btoa&&(btoa=function(e){return(e instanceof Buffer?e:new Buffer(e.toString(),"binary")).toString("base64")}),r.caniuse=function(){var e=!0;return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e&&"function"==typeof Promise)&&"function"==typeof Promise.reject)&&"function"==typeof Promise.prototype.then)&&"function"==typeof Promise.all)&&"object"==typeof r.crypto)&&"object"==typeof r.crypto.subtle)&&"function"==typeof r.crypto.getRandomValues)&&"function"==typeof r.crypto.subtle.importKey)&&"function"==typeof r.crypto.subtle.generateKey)&&"function"==typeof r.crypto.subtle.exportKey)&&"function"==typeof r.crypto.subtle.wrapKey)&&"function"==typeof r.crypto.subtle.unwrapKey)&&"function"==typeof r.crypto.subtle.encrypt)&&"function"==typeof r.crypto.subtle.decrypt)&&"function"==typeof r.crypto.subtle.sign)&&"function"==typeof ArrayBuffer)&&("function"==typeof Uint8Array||"object"==typeof Uint8Array))&&("function"==typeof Uint32Array||"object"==typeof Uint32Array))&&"object"==typeof JSON)&&"function"==typeof JSON.parse)&&"function"==typeof JSON.stringify)&&"function"==typeof atob)&&"function"==typeof btoa},r.assert=function(e,t){if(!e)throw new Error(t)},t.Jose=r,t.JoseJWE=n,t.JoseJWS=o;var i=function(){this.setKeyEncryptionAlgorithm("RSA-OAEP"),this.setContentEncryptionAlgorithm("A256GCM"),this.setContentSignAlgorithm("RS256")};r.WebCryptographer=i,i.prototype.setKeyEncryptionAlgorithm=function(e){this.key_encryption=c(e)},i.prototype.getKeyEncryptionAlgorithm=function(){return this.key_encryption.jwe_name},i.prototype.setContentEncryptionAlgorithm=function(e){this.content_encryption=c(e)},i.prototype.getContentEncryptionAlgorithm=function(){return this.content_encryption.jwe_name},i.prototype.setContentSignAlgorithm=function(e){this.content_sign=l(e)},i.prototype.getContentSignAlgorithm=function(){return this.content_sign.jwa_name},i.prototype.createIV=function(){var e=new Uint8Array(new Array(this.content_encryption.iv_bytes));return r.crypto.getRandomValues(e)},i.prototype.createCek=function(){var e=a(this.content_encryption);return r.crypto.subtle.generateKey(e.id,!0,e.enc_op)},i.prototype.wrapCek=function(e,t){return r.crypto.subtle.wrapKey("raw",e,t,this.key_encryption.id)},i.prototype.unwrapCek=function(e,t){var n=a(this.content_encryption),o=this.content_encryption.specific_cek_bytes>0,i=this.key_encryption.id;return r.crypto.subtle.unwrapKey("raw",e,t,i,n.id,o,n.dec_op)};var a=function(e){var t=e.specific_cek_bytes;if(t){if(16==t)return{id:{name:"AES-CBC",length:128},enc_op:["encrypt"],dec_op:["decrypt"]};if(32==t)return{id:{name:"AES-CBC",length:256},enc_op:["encrypt"],dec_op:["decrypt"]};if(64==t)return{id:{name:"HMAC",hash:{name:"SHA-256"}},enc_op:["sign"],dec_op:["verify"]};if(128==t)return{id:{name:"HMAC",hash:{name:"SHA-384"}},enc_op:["sign"],dec_op:["verify"]};r.assert(!1,"getCekWorkaround: invalid len")}return{id:e.id,enc_op:["encrypt"],dec_op:["decrypt"]}};i.prototype.encrypt=function(e,t,n,o){var i=this.content_encryption;if(e.length!=i.iv_bytes)return Promise.reject(Error("invalid IV length"));if(i.auth.aead){var a=i.auth.tag_bytes,c={name:i.id.name,iv:e,additionalData:t,tagLength:8*a};return n.then((function(e){return r.crypto.subtle.encrypt(c,e,o).then((function(e){var t=e.byteLength-a;return{cipher:e.slice(0,t),tag:e.slice(t)}}))}))}var l=s(i,n,["encrypt"]),p=l[0],f=l[1].then((function(t){var n={name:i.id.name,iv:e};return r.crypto.subtle.encrypt(n,t,o)})),h=f.then((function(r){return u(i,p,t,e,r)}));return Promise.all([f,h]).then((function(e){return{cipher:e[0],tag:e[1]}}))},i.prototype.decrypt=function(e,t,n,o,i){if(n.length!=this.content_encryption.iv_bytes)return Promise.reject(Error("decryptCiphertext: invalid IV"));var a=this.content_encryption;if(a.auth.aead){var c={name:a.id.name,iv:n,additionalData:t,tagLength:8*a.auth.tag_bytes};return e.then((function(e){var t=h.arrayBufferConcat(o,i);return r.crypto.subtle.decrypt(c,e,t)}))}var l=s(a,e,["decrypt"]),p=l[0],f=l[1],d=u(a,p,t,n,o);return Promise.all([f,d]).then((function(e){var t=e[0],s=e[1];return function(e,t,n,o){return r.assert(n instanceof Uint8Array,"compare: invalid input"),r.assert(o instanceof Uint8Array,"compare: invalid input"),t.then((function(t){var i=r.crypto.subtle.sign(e.auth.id,t,n),a=r.crypto.subtle.sign(e.auth.id,t,o);return Promise.all([i,a]).then((function(e){var t=new Uint8Array(e[0]),r=new Uint8Array(e[1]);if(t.length!=r.length)throw new Error("compare failed");for(var n=0;n<t.length;n++)if(t[n]!=r[n])throw new Error("compare failed");return Promise.resolve(null)}))}))}(a,p,new Uint8Array(s),i).then((function(){var e={name:a.id.name,iv:n};return r.crypto.subtle.decrypt(e,t,o)})).catch((function(e){return Promise.reject(Error("decryptCiphertext: MAC failed."))}))}))},i.prototype.sign=function(e,t,n){var o=this.content_sign;return e.alg&&(o=l(e.alg)),n.then((function(n){return r.crypto.subtle.sign(o.id,n,h.arrayFromString(h.Base64Url.encode(JSON.stringify(e))+"."+h.Base64Url.encodeArray(t)))}))},i.prototype.verify=function(e,t,n,o,i){var a=this.content_sign;return o.then((function(o){return a=l(p(o)),r.crypto.subtle.verify(a.id,o,n,h.arrayFromString(e+"."+t)).then((function(e){return{kid:i,verified:e}}))}))},r.WebCryptographer.keyId=function(e){return h.sha256(e.n+"+"+e.d)};var s=function(e,t,n){var o=t.then((function(e){return r.crypto.subtle.exportKey("raw",e)}));return[o.then((function(t){if(8*t.byteLength!=e.id.length+8*e.auth.key_bytes)return Promise.reject(Error("encryptPlainText: incorrect cek length"));var n=t.slice(0,e.auth.key_bytes);return r.crypto.subtle.importKey("raw",n,e.auth.id,!1,["sign"])})),o.then((function(t){if(8*t.byteLength!=e.id.length+8*e.auth.key_bytes)return Promise.reject(Error("encryptPlainText: incorrect cek length"));var o=t.slice(e.auth.key_bytes);return r.crypto.subtle.importKey("raw",o,e.id,!1,n)}))]},c=function(e){switch(e){case"RSA-OAEP":return{jwe_name:"RSA-OAEP",id:{name:"RSA-OAEP",hash:{name:"SHA-1"}}};case"RSA-OAEP-256":return{jwe_name:"RSA-OAEP-256",id:{name:"RSA-OAEP",hash:{name:"SHA-256"}}};case"A128KW":return{jwe_name:"A128KW",id:{name:"AES-KW",length:128}};case"A256KW":return{jwe_name:"A256KW",id:{name:"AES-KW",length:256}};case"dir":return{jwe_name:"dir"};case"A128CBC-HS256":return{jwe_name:"A128CBC-HS256",id:{name:"AES-CBC",length:128},iv_bytes:16,specific_cek_bytes:32,auth:{key_bytes:16,id:{name:"HMAC",hash:{name:"SHA-256"}},truncated_bytes:16}};case"A256CBC-HS512":return{jwe_name:"A256CBC-HS512",id:{name:"AES-CBC",length:256},iv_bytes:16,specific_cek_bytes:64,auth:{key_bytes:32,id:{name:"HMAC",hash:{name:"SHA-512"}},truncated_bytes:32}};case"A128GCM":return{jwe_name:"A128GCM",id:{name:"AES-GCM",length:128},iv_bytes:12,auth:{aead:!0,tag_bytes:16}};case"A256GCM":return{jwe_name:"A256GCM",id:{name:"AES-GCM",length:256},iv_bytes:12,auth:{aead:!0,tag_bytes:16}};default:throw Error("unsupported algorithm: "+e)}},u=function(e,t,n,o,i){return t.then((function(t){var a=new Uint8Array(h.arrayFromInt32(8*n.length)),s=new Uint8Array(8);s.set(a,4);var c=h.arrayBufferConcat(n,o,i,s);return r.crypto.subtle.sign(e.auth.id,t,c).then((function(t){return t.slice(0,e.auth.truncated_bytes)}))}))},l=function(e){switch(e){case"RS256":return{jwa_name:"RS256",id:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}}};case"RS384":return{jwa_name:"RS384",id:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}}};case"RS512":return{jwa_name:"RS512",id:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}};case"PS256":return{jwa_name:"PS256",id:{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:20}};case"PS384":return{jwa_name:"PS384",id:{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:20}};case"PS512":return{jwa_name:"PS512",id:{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:20}};case"HS256":return{jwa_name:"HS256",id:{name:"HMAC",hash:{name:"SHA-256"}}};case"HS384":return{jwa_name:"HS384",id:{name:"HMAC",hash:{name:"SHA-384"}}};case"HS512":return{jwa_name:"HS512",id:{name:"HMAC",hash:{name:"SHA-512"}}};case"ES256":return{jwa_name:"ES256",id:{name:"ECDSA",hash:{name:"SHA-256"}}};case"ES384":return{jwa_name:"ES384",id:{name:"ECDSA",hash:{name:"SHA-384"}}};case"ES512":return{jwa_name:"ES512",id:{name:"ECDSA",hash:{name:"SHA-512"}}};default:throw Error("unsupported algorithm: "+e)}},p=function(e){var t="",r=e.algorithm.name,n=e.algorithm.hash.name;if("RSASSA-PKCS1-v1_5"==r)t="R";else{if("RSA-PSS"!=r)throw new Error("unsupported sign/verify algorithm "+r);t="P"}if(0!==n.indexOf("SHA-"))throw new Error("unsupported hash algorithm "+r);return(t+="S")+n.substring(4)},f=function(e){switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"HS256":case"HS384":case"HS512":case"ES256":case"ES384":case"ES512":return{publicKey:"verify",privateKey:"sign"};case"RSA-OAEP":case"RSA-OAEP-256":case"A128KW":case"A256KW":return{publicKey:"wrapKey",privateKey:"unwrapKey"};default:throw Error("unsupported algorithm: "+e)}};r.Utils={};var h={};r.Utils.importRsaPublicKey=function(e,t){var n,o,i=f(t);if("wrapKey"==i.publicKey)e.alg||(e.alg=t),n=h.convertRsaKey(e,["n","e"]),o=c(t);else{var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);!a.alg&&t&&(a.alg=t),o=l(a.alg),(n=h.convertRsaKey(a,["n","e"])).ext=!0}return r.crypto.subtle.importKey("jwk",n,o.id,!1,[i.publicKey])},r.Utils.importRsaPrivateKey=function(e,t){var n,o,i=f(t);if("unwrapKey"==i.privateKey)e.alg||(e.alg=t),n=h.convertRsaKey(e,["n","e","d","p","q","dp","dq","qi"]),o=c("RSA-OAEP");else{var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);o=l(t),!a.alg&&t&&(a.alg=t),(n=h.convertRsaKey(a,["n","e","d","p","q","dp","dq","qi"])).ext=!0}return r.crypto.subtle.importKey("jwk",n,o.id,!1,[i.privateKey])},h.isString=function(e){return"string"==typeof e||e instanceof String},h.arrayish=function(e){return e instanceof Array||e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):void r.assert(!1,"arrayish: invalid input")},h.convertRsaKey=function(e,t){var n,o={},i=[];t.map((function(t){void 0===e[t]&&i.push(t)})),i.length>0&&r.assert(!1,"convertRsaKey: Was expecting "+i.join()),void 0!==e.kty&&r.assert("RSA"==e.kty,"convertRsaKey: expecting rsa_key['kty'] to be 'RSA'"),o.kty="RSA";try{l(e.alg),n=e.alg}catch(t){try{c(e.alg),n=e.alg}catch(e){r.assert(n,"convertRsaKey: expecting rsa_key['alg'] to have a valid value")}}o.alg=n;for(var a=function(e){return parseInt(e,16)},s=0;s<t.length;s++){var u=t[s],p=e[u];if("e"==u)"number"==typeof p&&(p=h.Base64Url.encodeArray(h.stripLeadingZeros(h.arrayFromInt32(p))));else if(/^([0-9a-fA-F]{2}:)+[0-9a-fA-F]{2}$/.test(p)){var f=p.split(":").map(a);p=h.Base64Url.encodeArray(h.stripLeadingZeros(f))}else"string"!=typeof p&&r.assert(!1,"convertRsaKey: expecting rsa_key['"+u+"'] to be a string");o[u]=p}return o},h.arrayFromString=function(e){r.assert(h.isString(e),"arrayFromString: invalid input");var t=e.split("").map((function(e){return e.charCodeAt(0)}));return new Uint8Array(t)},h.arrayFromUtf8String=function(e){return r.assert(h.isString(e),"arrayFromUtf8String: invalid input"),e=unescape(encodeURIComponent(e)),h.arrayFromString(e)},h.stringFromArray=function(e){e=h.arrayish(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},h.utf8StringFromArray=function(e){r.assert(e instanceof ArrayBuffer,"utf8StringFromArray: invalid input");var t=h.stringFromArray(e);return decodeURIComponent(escape(t))},h.stripLeadingZeros=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t=!0,r=[],n=0;n<e.length;n++)t&&0===e[n]||(t=!1,r.push(e[n]));return r},h.arrayFromInt32=function(e){r.assert("number"==typeof e,"arrayFromInt32: invalid input"),r.assert(e==e|0,"arrayFromInt32: out of range");for(var t=new Uint8Array(new Uint32Array([e]).buffer),n=new Uint8Array(4),o=0;o<4;o++)n[o]=t[3-o];return n.buffer},h.arrayBufferConcat=function(){for(var e=[],t=0,n=0;n<arguments.length;n++)e.push(h.arrayish(arguments[n])),t+=e[n].length;var o=new Uint8Array(t),i=0;for(n=0;n<arguments.length;n++)for(var a=0;a<e[n].length;a++)o[i++]=e[n][a];return r.assert(i==t,"arrayBufferConcat: unexpected offset"),o},h.Base64Url={},h.Base64Url.encode=function(e){return r.assert(h.isString(e),"Base64Url.encode: invalid input"),btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},h.Base64Url.encodeArray=function(e){return h.Base64Url.encode(h.stringFromArray(e))},h.Base64Url.decode=function(e){return r.assert(h.isString(e),"Base64Url.decode: invalid input"),atob(e.replace(/-/g,"+").replace(/_/g,"/"))},h.Base64Url.decodeArray=function(e){return r.assert(h.isString(e),"Base64Url.decodeArray: invalid input"),h.arrayFromString(h.Base64Url.decode(e))},h.sha256=function(e){return r.crypto.subtle.digest({name:"SHA-256"},h.arrayFromString(e)).then((function(e){return h.Base64Url.encodeArray(e)}))},h.isCryptoKey=function(e){return"CryptoKey"==e.constructor.name||!!e.hasOwnProperty("algorithm")},n.Encrypter=function(e,t){this.cryptographer=e,this.key_promise=t,this.userHeaders={}},n.Encrypter.prototype.addHeader=function(e,t){this.userHeaders[e]=t},n.Encrypter.prototype.encrypt=function(e){var t,r;"dir"==this.cryptographer.getKeyEncryptionAlgorithm()?(t=Promise.resolve(this.key_promise),r=[]):(t=this.cryptographer.createCek(),r=Promise.all([this.key_promise,t]).then(function(e){var t=e[0],r=e[1];return this.cryptographer.wrapCek(r,t)}.bind(this)));var n=function(e,t){var r={};for(var n in this.userHeaders)r[n]=this.userHeaders[n];r.alg=this.cryptographer.getKeyEncryptionAlgorithm(),r.enc=this.cryptographer.getContentEncryptionAlgorithm();var o=h.Base64Url.encode(JSON.stringify(r)),i=this.cryptographer.createIV(),a=h.arrayFromString(o);return t=h.arrayFromUtf8String(t),this.cryptographer.encrypt(i,a,e,t).then((function(e){return e.header=o,e.iv=i,e}))}.bind(this,t,e)();return Promise.all([r,n]).then((function(e){var t=e[0],r=e[1];return r.header+"."+h.Base64Url.encodeArray(t)+"."+h.Base64Url.encodeArray(r.iv)+"."+h.Base64Url.encodeArray(r.cipher)+"."+h.Base64Url.encodeArray(r.tag)}))},n.Decrypter=function(e,t){this.cryptographer=e,this.key_promise=t,this.headers={}},n.Decrypter.prototype.getHeaders=function(){return this.headers},n.Decrypter.prototype.decrypt=function(e){var t,r=e.split(".");if(5!=r.length)return Promise.reject(Error("decrypt: invalid input"));if(this.headers=JSON.parse(h.Base64Url.decode(r[0])),!this.headers.alg)return Promise.reject(Error("decrypt: missing alg"));if(!this.headers.enc)return Promise.reject(Error("decrypt: missing enc"));if(this.cryptographer.setKeyEncryptionAlgorithm(this.headers.alg),this.cryptographer.setContentEncryptionAlgorithm(this.headers.enc),this.headers.crit)return Promise.reject(Error("decrypt: crit is not supported"));if("dir"==this.headers.alg)t=Promise.resolve(this.key_promise);else{var n=h.Base64Url.decodeArray(r[1]);t=this.key_promise.then(function(e){return this.cryptographer.unwrapCek(n,e)}.bind(this))}return this.cryptographer.decrypt(t,h.arrayFromString(r[0]),h.Base64Url.decodeArray(r[2]),h.Base64Url.decodeArray(r[3]),h.Base64Url.decodeArray(r[4])).then(h.utf8StringFromArray)},o.Signer=function(e){this.cryptographer=e,this.key_promises={},this.waiting_kid=0,this.headers={},this.signer_aads={},this.signer_headers={}},o.Signer.prototype.addSigner=function(e,t,n,o){var i,a,s,c=this;if(h.isCryptoKey(e)?i=new Promise((function(t){t(e)})):(a=n&&n.alg?n.alg:c.cryptographer.getContentSignAlgorithm(),i=r.Utils.importRsaPrivateKey(e,a,"sign")),t)s=new Promise((function(e){e(t)}));else{if(h.isCryptoKey(e))throw new Error("key_id is a mandatory argument when the key is a CryptoKey");s=r.WebCryptographer.keyId(e)}return c.waiting_kid++,s.then((function(e){return c.key_promises[e]=i,c.waiting_kid--,n&&(c.signer_aads[e]=n),o&&(c.signer_headers[e]=o),e}))},o.Signer.prototype.addSignature=function(e,t,r){if(h.isString(e)&&(e=JSON.parse(e)),e.payload&&h.isString(e.payload)&&e.protected&&h.isString(e.protected)&&e.header&&e.header instanceof Object&&e.signature&&h.isString(e.signature))return this.sign(d.fromObject(e),t,r);throw new Error("JWS is not a valid JWS object")},o.Signer.prototype.sign=function(e,t,r){var n=this,o=[];if(0===Object.keys(n.key_promises).length)throw new Error("No signers defined. At least one is required to sign the JWS.");if(n.waiting_kid)throw new Error("still generating key IDs");for(var i in n.key_promises)n.key_promises.hasOwnProperty(i)&&o.push(i);return function e(t,r,o,i,a){if(a.length){var s=a.shift(),c=function(e,t,r,o,i){var a;if(t||(t={}),t.alg||(t.alg=n.cryptographer.getContentSignAlgorithm(),t.typ="JWT"),t.kid||(t.kid=i),h.isString(e))a=h.arrayFromUtf8String(e);else try{a=h.arrayish(e)}catch(t){if(e instanceof d)a=h.arrayFromString(h.Base64Url.decode(e.payload));else{if(!(e instanceof Object))throw new Error("cannot sign this message");a=h.arrayFromUtf8String(JSON.stringify(e))}}return n.cryptographer.sign(t,a,o).then((function(n){var o=new d(t,r,a,n);return e instanceof d?(delete o.payload,e.signatures?e.signatures.push(o):e.signatures=[o],e):o}))}(t,n.signer_aads[s]||r,n.signer_headers[s]||o,i[s],s);return a.length&&(c=c.then((function(t){return e(t,null,null,i,a)}))),c}}(e,t,r,n.key_promises,o)};var d=function(e,t,r,n){this.header=t,this.payload=h.Base64Url.encodeArray(r),n&&(this.signature=h.Base64Url.encodeArray(n)),this.protected=h.Base64Url.encode(JSON.stringify(e))};d.fromObject=function(e){var t=new d(e.protected,e.header,e.payload,null);return t.signature=e.signature,t.signatures=e.signatures,t},d.prototype.JsonSerialize=function(){return JSON.stringify(this)},d.prototype.CompactSerialize=function(){return this.protected+"."+this.payload+"."+this.signature},o.Verifier=function(e,t,n){var o,i,a,s,c,u,l,p=this;if(p.cryptographer=e,o=e.getContentSignAlgorithm(),p.cryptographer=new r.WebCryptographer,h.isString(t))if(i=/^([0-9a-z_\-]+)\.([0-9a-z_\-]+)\.([0-9a-z_\-]+)$/i.exec(t)){if(4!=i.length)throw new Error("wrong JWS compact serialization format");t={protected:i[1],payload:i[2],signature:i[3]}}else t=JSON.parse(t);else if("object"!=typeof t)throw new Error("data format not supported");a=t.protected,s=t.header,c=t.payload,(u=t.signatures instanceof Array?t.signatures.slice(0):[]).forEach((function(e){e.aad=e.protected,e.protected=JSON.parse(h.Base64Url.decode(e.protected))})),p.aad=a,l=h.Base64Url.decode(a);try{l=JSON.parse(l)}catch(e){}if(!l&&!s)throw new Error("at least one header is required");if(!l.alg)throw new Error("'alg' is a mandatory header");if(l.alg!=o)throw new Error("the alg header '"+l.alg+"' doesn't match the requested algorithm '"+o+"'");if(l&&l.typ&&"JWT"!=l.typ)throw new Error("typ '"+l.typ+"' not supported");t.signature&&u.unshift({aad:a,protected:l,header:s,signature:t.signature}),p.signatures=[];for(var f=0;f<u.length;f++)p.signatures[f]=JSON.parse(JSON.stringify(u[f])),p.signatures[f].signature=h.arrayFromString(h.Base64Url.decode(u[f].signature));p.payload=c,p.key_promises={},p.waiting_kid=0,n&&(p.keyfinder=n)},o.Verifier.prototype.addRecipient=function(e,t,n){var o,i=this,a=h.isCryptoKey(e)?new Promise((function(t){t(e)})):r.Utils.importRsaPublicKey(e,n||i.cryptographer.getContentSignAlgorithm(),"verify");if(t)o=new Promise((function(e){e(t)}));else{if(h.isCryptoKey(e))throw new Error("key_id is a mandatory argument when the key is a CryptoKey");console.log("it's not safe to not pass a key_id"),o=r.WebCryptographer.keyId(e)}return i.waiting_kid++,o.then((function(e){return i.key_promises[e]=a,i.waiting_kid--,e}))},o.Verifier.prototype.verify=function(){var e=this,t=e.signatures,r=e.key_promises,n=e.keyfinder,o=[];if(!(n||Object.keys(e.key_promises).length>0))throw new Error("No recipients defined. At least one is required to verify the JWS.");if(e.waiting_kid)throw new Error("still generating key IDs");return t.forEach((function(t){var i=t.protected.kid;n&&(r[i]=n(i)),o.push(e.cryptographer.verify(t.aad,e.payload,t.signature,r[i],i).then((function(t){return t.verified&&(t.payload=h.Base64Url.decode(e.payload)),t})))})),Promise.all(o)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{"use strict";function e(e,t){return function(){return e.apply(t,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:n}=Object,o=(i=Object.create(null),e=>{const r=t.call(e);return i[r]||(i[r]=r.slice(8,-1).toLowerCase())});var i;const a=e=>(e=e.toLowerCase(),t=>o(t)===e),s=e=>t=>typeof t===e,{isArray:c}=Array,u=s("undefined"),l=a("ArrayBuffer"),p=s("string"),f=s("function"),h=s("number"),d=e=>null!==e&&"object"==typeof e,y=e=>{if("object"!==o(e))return!1;const t=n(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},g=a("Date"),m=a("File"),b=a("Blob"),w=a("FileList"),S=a("URLSearchParams");function A(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),c(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(n=0;n<i;n++)a=o[n],t.call(null,e[a],a,e)}}const E=(v="undefined"!=typeof Uint8Array&&n(Uint8Array),e=>v&&e instanceof v);var v;const _=a("HTMLFormElement"),O=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),C=a("RegExp"),P=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};A(r,((r,o)=>{!1!==t(r,o,e)&&(n[o]=r)})),Object.defineProperties(e,n)},R={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&f(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{const r="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||t.call(e)===r||f(e.toString)&&e.toString()===r)},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer),t},isString:p,isNumber:h,isBoolean:e=>!0===e||!1===e,isObject:d,isPlainObject:y,isUndefined:u,isDate:g,isFile:m,isBlob:b,isRegExp:C,isFunction:f,isStream:e=>d(e)&&f(e.pipe),isURLSearchParams:S,isTypedArray:E,isFileList:w,forEach:A,merge:function e(){const t={},r=(r,n)=>{y(t[n])&&y(r)?t[n]=e(t[n],r):y(r)?t[n]=e({},r):c(r)?t[n]=r.slice():t[n]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&A(arguments[e],r);return t},extend:(t,r,n,{allOwnKeys:o}={})=>(A(r,((r,o)=>{n&&f(r)?t[o]=e(r,n):t[o]=r}),{allOwnKeys:o}),t),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,o)=>{let i,a,s;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],o&&!o(s,e,t)||c[s]||(t[s]=e[s],c[s]=!0);e=!1!==r&&n(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:a,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(c(e))return e;let t=e.length;if(!h(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:_,hasOwnProperty:O,hasOwnProp:O,reduceDescriptors:P,freezeMethods:e=>{P(e,((t,r)=>{const n=e[r];f(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return c(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t)};function j(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}R.inherits(j,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const k=j.prototype,U={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{U[e]={value:e}})),Object.defineProperties(j,U),Object.defineProperty(k,"isAxiosError",{value:!0}),j.from=(e,t,r,n,o,i)=>{const a=Object.create(k);return R.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),j.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const B=j,x=r(401);function T(e){return R.isPlainObject(e)||R.isArray(e)}function N(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function D(e,t,r){return e?e.concat(t).map((function(e,t){return e=N(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const F=R.toFlatObject(R,{},null,(function(e){return/^is[A-Z]/.test(e)})),K=function(e,t,r){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new(x||FormData);const n=(r=R.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!R.isUndefined(t[e])}))).metaTokens,o=r.visitor||l,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&(c=t)&&R.isFunction(c.append)&&"FormData"===c[Symbol.toStringTag]&&c[Symbol.iterator];var c;if(!R.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(R.isDate(e))return e.toISOString();if(!s&&R.isBlob(e))throw new B("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(e)||R.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,r,o){let s=e;if(e&&!o&&"object"==typeof e)if(R.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(R.isArray(e)&&function(e){return R.isArray(e)&&!e.some(T)}(e)||R.isFileList(e)||R.endsWith(r,"[]")&&(s=R.toArray(e)))return r=N(r),s.forEach((function(e,n){!R.isUndefined(e)&&t.append(!0===a?D([r],n,i):null===a?r:r+"[]",u(e))})),!1;return!!T(e)||(t.append(D(o,r,i),u(e)),!1)}const p=[],f=Object.assign(F,{defaultVisitor:l,convertValue:u,isVisitable:T});if(!R.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!R.isUndefined(r)){if(-1!==p.indexOf(r))throw Error("Circular reference detected in "+n.join("."));p.push(r),R.forEach(r,(function(r,i){!0===(!R.isUndefined(r)&&o.call(t,r,R.isString(i)?i.trim():i,n,f))&&e(r,n?n.concat(i):[i])})),p.pop()}}(e),t};function L(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function H(e,t){this._pairs=[],e&&K(e,this,t)}const I=H.prototype;I.append=function(e,t){this._pairs.push([e,t])},I.toString=function(e){const t=e?function(t){return e.call(this,t,L)}:L;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const J=H;function M(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function W(e,t,r){if(!t)return e;const n=e.indexOf("#");-1!==n&&(e=e.slice(0,n));const o=r&&r.encode||M,i=R.isURLSearchParams(t)?t.toString():new J(t,r).toString(o);return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}const q=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},z={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V="undefined"!=typeof URLSearchParams?URLSearchParams:J,$=FormData,G=(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),Y={isBrowser:!0,classes:{URLSearchParams:V,FormData:$,Blob},isStandardBrowserEnv:G,protocols:["http","https","file","blob","url","data"]},X=function(e){function t(e,r,n,o){let i=e[o++];const a=Number.isFinite(+i),s=o>=e.length;return i=!i&&R.isArray(n)?n.length:i,s?(R.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a):(n[i]&&R.isObject(n[i])||(n[i]=[]),t(e,r,n[i],o)&&R.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}(n[i])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const r={};return R.forEachEntry(e,((e,n)=>{t(function(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null},Z=Y.isStandardBrowserEnv?{write:function(e,t,r,n,o,i){const a=[];a.push(e+"="+encodeURIComponent(t)),R.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),R.isString(n)&&a.push("path="+n),R.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Q(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ee=Y.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function n(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(e){const t=R.isString(e)?n(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0};function te(e,t,r){B.call(this,null==e?"canceled":e,B.ERR_CANCELED,t,r),this.name="CanceledError"}R.inherits(te,B,{__CANCEL__:!0});const re=te,ne=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oe=Symbol("internals"),ie=Symbol("defaults");function ae(e){return e&&String(e).trim().toLowerCase()}function se(e){return!1===e||null==e?e:String(e)}function ce(e,t,r,n){return R.isFunction(n)?n.call(this,t,r):R.isString(t)?R.isString(n)?-1!==t.indexOf(n):R.isRegExp(n)?n.test(t):void 0:void 0}function ue(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}function le(e,t){e&&this.set(e),this[ie]=t||null}Object.assign(le.prototype,{set:function(e,t,r){const n=this;function o(e,t,r){const o=ae(t);if(!o)throw new Error("header name must be a non-empty string");const i=ue(n,o);(!i||!0===r||!1!==n[i]&&!1!==r)&&(e=R.isArray(e)?e.map(se):se(e),n[i||t]=e)}return R.isPlainObject(e)?R.forEach(e,((e,r)=>{o(e,r,t)})):o(t,e,r),this},get:function(e,t){if(!(e=ae(e)))return;const r=ue(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(R.isFunction(t))return t.call(this,e,r);if(R.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}},has:function(e,t){if(e=ae(e)){const r=ue(this,e);return!(!r||t&&!ce(0,this[r],r,t))}return!1},delete:function(e,t){const r=this;let n=!1;function o(e){if(e=ae(e)){const o=ue(r,e);!o||t&&!ce(0,r[o],o,t)||(delete r[o],n=!0)}}return R.isArray(e)?e.forEach(o):o(e),n},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){const t=this,r={};return R.forEach(this,((n,o)=>{const i=ue(r,o);if(i)return t[i]=se(n),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(o):String(o).trim();a!==o&&delete t[o],t[a]=se(n),r[a]=!0})),this},toJSON:function(){const e=Object.create(null);return R.forEach(Object.assign({},this[ie]||null,this),((t,r)=>{null!=t&&!1!==t&&(e[r]=R.isArray(t)?t.join(", "):t)})),e}}),Object.assign(le,{from:function(e){return R.isString(e)?new this((e=>{const t={};let r,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&ne[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e)):e instanceof this?e:new this(e)},accessor:function(e){const t=(this[oe]=this[oe]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=ae(e);t[n]||(function(e,t){const r=R.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return R.isArray(e)?e.forEach(n):n(e),this}}),le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),R.freezeMethods(le.prototype),R.freezeMethods(le);const pe=le;function fe(e,t){let r=0;const n=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),u=n[a];o||(o=c),r[i]=s,n[i]=c;let l=a,p=0;for(;l!==i;)p+=r[l++],l%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const f=u&&c-u;return f?Math.round(1e3*p/f):void 0}}(50,250);return o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-r,c=n(s);r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0};u[t?"download":"upload"]=!0,e(u)}}function he(e){return new Promise((function(t,r){let n=e.data;const o=pe.from(e.headers).normalize(),i=e.responseType;let a;function s(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}R.isFormData(n)&&Y.isStandardBrowserEnv&&o.setContentType(!1);let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(t+":"+r))}const u=Q(e.baseURL,e.url);function l(){if(!c)return;const n=pe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new B("Request failed with status code "+r.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}((function(e){t(e),s()}),(function(e){r(e),s()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),W(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=l:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(l)},c.onabort=function(){c&&(r(new B("Request aborted",B.ECONNABORTED,e,c)),c=null)},c.onerror=function(){r(new B("Network Error",B.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||z;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new B(t,n.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,e,c)),c=null},Y.isStandardBrowserEnv){const t=(e.withCredentials||ee(u))&&e.xsrfCookieName&&Z.read(e.xsrfCookieName);t&&o.set(e.xsrfHeaderName,t)}void 0===n&&o.setContentType(null),"setRequestHeader"in c&&R.forEach(o.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),R.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&"json"!==i&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",fe(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",fe(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{c&&(r(!t||t.type?new re(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===Y.protocols.indexOf(p)?r(new B("Unsupported protocol "+p+":",B.ERR_BAD_REQUEST,e)):c.send(n||null)}))}const de={http:he,xhr:he},ye=e=>{if(R.isString(e)){const t=de[e];if(!e)throw Error(R.hasOwnProp(e)?`Adapter '${e}' is not available in the build`:`Can not resolve adapter '${e}'`);return t}if(!R.isFunction(e))throw new TypeError("adapter is not a function");return e},ge={"Content-Type":"application/x-www-form-urlencoded"},me={transitional:z,adapter:function(){let e;return"undefined"!=typeof XMLHttpRequest?e=ye("xhr"):"undefined"!=typeof process&&"process"===R.kindOf(process)&&(e=ye("http")),e}(),transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=R.isObject(e);if(o&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return n&&n?JSON.stringify(X(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return K(e,new Y.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Y.isNode&&R.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=R.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return K(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,r){if(R.isString(e))try{return(0,JSON.parse)(e),R.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||me.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&R.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw B.from(e,B.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Y.classes.FormData,Blob:Y.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};R.forEach(["delete","get","head"],(function(e){me.headers[e]={}})),R.forEach(["post","put","patch"],(function(e){me.headers[e]=R.merge(ge)}));const be=me;function we(e,t){const r=this||be,n=t||r,o=pe.from(n.headers);let i=n.data;return R.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function Se(e){return!(!e||!e.__CANCEL__)}function Ae(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new re}function Ee(e){return Ae(e),e.headers=pe.from(e.headers),e.data=we.call(e,e.transformRequest),(e.adapter||be.adapter)(e).then((function(t){return Ae(e),t.data=we.call(e,e.transformResponse,t),t.headers=pe.from(t.headers),t}),(function(t){return Se(t)||(Ae(e),t&&t.response&&(t.response.data=we.call(e,e.transformResponse,t.response),t.response.headers=pe.from(t.response.headers))),Promise.reject(t)}))}function ve(e,t){t=t||{};const r={};function n(e,t){return R.isPlainObject(e)&&R.isPlainObject(t)?R.merge(e,t):R.isPlainObject(t)?R.merge({},t):R.isArray(t)?t.slice():t}function o(r){return R.isUndefined(t[r])?R.isUndefined(e[r])?void 0:n(void 0,e[r]):n(e[r],t[r])}function i(e){if(!R.isUndefined(t[e]))return n(void 0,t[e])}function a(r){return R.isUndefined(t[r])?R.isUndefined(e[r])?void 0:n(void 0,e[r]):n(void 0,t[r])}function s(r){return r in t?n(e[r],t[r]):r in e?n(void 0,e[r]):void 0}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return R.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){const t=c[e]||o,n=t(e);R.isUndefined(n)&&t!==s||(r[e]=n)})),r}const _e={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{_e[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Oe={};_e.transitional=function(e,t,r){function n(e,t){return"[Axios v1.1.2] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new B(n(o," has been removed"+(t?" in "+t:"")),B.ERR_DEPRECATED);return t&&!Oe[o]&&(Oe[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}};const Ce={assertOptions:function(e,t,r){if("object"!=typeof e)throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const t=e[i],r=void 0===t||a(t,i,e);if(!0!==r)throw new B("option "+i+" must be "+r,B.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new B("Unknown option "+i,B.ERR_BAD_OPTION)}},validators:_e},Pe=Ce.validators;class Re{constructor(e){this.defaults=e,this.interceptors={request:new q,response:new q}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};const r=(t=ve(this.defaults,t)).transitional;void 0!==r&&Ce.assertOptions(r,{silentJSONParsing:Pe.transitional(Pe.boolean),forcedJSONParsing:Pe.transitional(Pe.boolean),clarifyTimeoutError:Pe.transitional(Pe.boolean)},!1),t.method=(t.method||this.defaults.method||"get").toLowerCase();const n=t.headers&&R.merge(t.headers.common,t.headers[t.method]);n&&R.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),t.headers=new pe(t.headers,n);const o=[];let i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const a=[];let s;this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)}));let c,u=0;if(!i){const e=[Ee.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,a),c=e.length,s=Promise.resolve(t);u<c;)s=s.then(e[u++],e[u++]);return s}c=o.length;let l=t;for(u=0;u<c;){const e=o[u++],t=o[u++];try{l=e(l)}catch(e){t.call(this,e);break}}try{s=Ee.call(this,l)}catch(e){return Promise.reject(e)}for(u=0,c=a.length;u<c;)s=s.then(a[u++],a[u++]);return s}getUri(e){return W(Q((e=ve(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],(function(e){Re.prototype[e]=function(t,r){return this.request(ve(r||{},{method:e,url:t,data:(r||{}).data}))}})),R.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(ve(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Re.prototype[e]=t(),Re.prototype[e+"Form"]=t(!0)}));const je=Re;class ke{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,o){r.reason||(r.reason=new re(e,n,o),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new ke((function(t){e=t})),cancel:e}}}const Ue=ke,Be=function t(r){const n=new je(r),o=e(je.prototype.request,n);return R.extend(o,je.prototype,n,{allOwnKeys:!0}),R.extend(o,n,null,{allOwnKeys:!0}),o.create=function(e){return t(ve(r,e))},o}(be);Be.Axios=je,Be.CanceledError=re,Be.CancelToken=Ue,Be.isCancel=Se,Be.VERSION="1.1.2",Be.toFormData=K,Be.AxiosError=B,Be.Cancel=Be.CanceledError,Be.all=function(e){return Promise.all(e)},Be.spread=function(e){return function(t){return e.apply(null,t)}},Be.isAxiosError=function(e){return R.isObject(e)&&!0===e.isAxiosError},Be.formToJSON=e=>X(R.isHTMLForm(e)?new FormData(e):e);const xe=Be;function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(e,t,r){return t&&De(e.prototype,t),r&&De(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ke="ACCOUNTS_IMPORT";const Le=new(function(){function e(){Ne(this,e)}return Fe(e,[{key:"connectIndexedDB",value:function(){return new Promise((function(e,t){try{var r=indexedDB.open("seven23",15);r.onupgradeneeded=function(e){var t,r=e.target.result;(t=r.objectStoreNames,function(e){if(Array.isArray(e))return Te(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){r.deleteObjectStore(e)}));var n=r.createObjectStore("transactions",{keyPath:"id"});n.createIndex("account","account",{unique:!1}),n.createIndex("date","date",{unique:!1}),n.createIndex("category",["account","category"],{unique:!1}),(n=r.createObjectStore("changes",{keyPath:"id"})).createIndex("account","account",{unique:!1}),(n=r.createObjectStore("categories",{keyPath:"id"})).createIndex("account","account",{unique:!1})},r.onblocked=function(e){console.error(e),t(e)},r.onerror=function(e){console.error(r.error),t(e)},r.onsuccess=function(t){e(t.target.result)}}catch(e){console.error(e),t(e)}}))}},{key:"reset",value:function(){}}]),e}());function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ie=r(699);function Je(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;o<n;o++)t+=String.fromCharCode(r[o]);return btoa(t).replace(/\=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var Me="Encryption Key missing. Please use Encryption.key(input) before processing data.";const We=new(Fe((function e(){var t=this;Ne(this,e),He(this,"key",(function(e){var r=t;return new Promise((function(t,n){var o,i;Ie.Jose.crypto.subtle.digest({name:"SHA-256"},(o=e,i=o.split("").map((function(e){return e.charCodeAt(0)})),new Uint8Array(i))).then((function(e){r._key=Ie.Jose.crypto.subtle.importKey("jwk",{kty:"oct",k:Je(e),length:256,alg:"A256KW"},{name:"AES-KW"},!0,["wrapKey","unwrapKey"]),r._key.then((function(e){r.encrypter=new Ie.JoseJWE.Encrypter(r.cryptographer,r._key),r.decrypter=new Ie.JoseJWE.Decrypter(r.cryptographer,r._key),t()})).catch(n)}))}))})),He(this,"encrypt",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t._key)throw new Error(Me);var r=t;return new Promise((function(t,n){r.encrypter.encrypt(JSON.stringify(e)).then((function(e){t(e)})).catch((function(e){console.error(e),n()}))}))})),He(this,"decrypt",(function(e){var r=t;return new Promise((function(t,n){r.decrypter.decrypt(e).then((function(e){t(JSON.parse(e))})).catch((function(e){console.error(e),n()}))}))})),He(this,"reset",(function(){t._key=null})),this.cryptographer=new Ie.Jose.WebCryptographer,this.cryptographer.setKeyEncryptionAlgorithm("A256KW"),this.cryptographer.setContentEncryptionAlgorithm("A128CBC-HS256"),this.encrypter=null,this.decrypter=null,this._key=null}))),qe={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ze;const Ve=new Uint8Array(16);function $e(){if(!ze&&(ze="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ze))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ze(Ve)}const Ge=[];for(let e=0;e<256;++e)Ge.push((e+256).toString(16).slice(1));const Ye=function(e,t,r){if(qe.randomUUID&&!t&&!e)return qe.randomUUID();const n=(e=e||{}).random||(e.rng||$e)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(Ge[e[t+0]]+Ge[e[t+1]]+Ge[e[t+2]]+Ge[e[t+3]]+"-"+Ge[e[t+4]]+Ge[e[t+5]]+"-"+Ge[e[t+6]]+Ge[e[t+7]]+"-"+Ge[e[t+8]]+Ge[e[t+9]]+"-"+Ge[e[t+10]]+Ge[e[t+11]]+Ge[e[t+12]]+Ge[e[t+13]]+Ge[e[t+14]]+Ge[e[t+15]]).toLowerCase()}(n)};function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}var Ze=/[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])/;function Qe(e){if(e instanceof Date){var t=e.getFullYear(),r=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2);return"".concat(t,"-").concat(r,"-").concat(n)}if("string"==typeof e){if(Ze.test(e))return e.slice(0,10);throw new Error("String '".concat(e,"' is not a valide date format (YYYY-MM-DD)"))}throw new Error("Type ".concat(Xe(e)," is not handled by Utils.date.dateToString()"))}onmessage=function(e){const t=e.data,{uuid:r}=t;switch(t.type){case Ke:if(t.isLocal){const{json:s}=e.data,c=s.account;function u(e=null){return new Promise(((t,r)=>{const n=s.categories.filter((t=>t.parent==e));0===n.length?t():n.forEach((e=>{const n=e.id;e.id=Ye(),Le.connectIndexedDB().then((t=>{t.transaction("categories","readwrite").objectStore("categories").add(e)})),s.categories.forEach((t=>{t.parent==n&&(t.parent=e.id)})),s.transactions.forEach((t=>{t.category==n&&(t.category=e.id)})),u(e.id).then(t).catch(r)}))}))}return c.id=Ye(),c.isLocal=!0,c.archived=!1,c.public=!1,s.transactions.forEach((e=>{e.account=c.id})),s.changes.forEach((e=>{e.account=c.id})),s.categories.forEach((e=>{e.account=c.id,e.parent||(e.parent=null)})),void u().then((()=>{s.changes.forEach((e=>{e.id=Ye(),Le.connectIndexedDB().then((t=>{t.transaction("changes","readwrite").objectStore("changes").put(e)}))})),s.transactions.forEach((e=>{e.id=Ye(),Le.connectIndexedDB().then((t=>{t.transaction("transactions","readwrite").objectStore("transactions").put(e)}))})),postMessage({uuid:r,type:Ke,account:c})})).catch((e=>{postMessage({uuid:r,type:Ke,exception:e})}))}We.key(t.cipher).then((()=>{const{json:t}=e.data;return t.account.preferences?We.encrypt(t.account.preferences):Promise.resolve("")})).then((n=>{const{json:o,token:i,url:a}=e.data;o.categories||(o.categories=[]),o.transactions||(o.transactions=[]),o.changes||(o.changes=[]),delete o.account.id,o.account.preferences=n,xe({url:a+"/api/v1/accounts",method:"POST",headers:{Authorization:"Token "+i},data:o.account}).then((e=>{const r=e.data;return o.account.id=r.id,o.account.isLocal=t.isLocal,o.transactions.forEach((e=>{e.account=r.id})),o.changes.forEach((e=>{e.account=r.id})),o.categories.forEach((e=>{e.account=r.id,e.parent||(e.parent=null)})),function e(t=null){return new Promise(((r,n)=>{const s=o.categories.filter((e=>e.parent==t));if(0===s.length)r();else{const t=[];s.forEach((e=>{t.push(new Promise(((t,r)=>{const n={};n.name=e.name,n.description=e.description,e.parent&&(n.parent=e.parent),We.encrypt(n).then((r=>{e.blob=r,delete e.name,delete e.description,delete e.parent,t()})).catch(r)})))})),Promise.all(t).then((()=>{xe({url:a+"/api/v1/categories",method:"POST",headers:{Authorization:"Token "+i},data:s}).then((t=>{const i=[];t.data.forEach((t=>{i.push(new Promise(((r,n)=>{const i=s.find((e=>e.blob&&e.blob===t.blob));We.decrypt(t.blob).then((a=>{delete t.blob,t=Object.assign({},t,a),Le.connectIndexedDB().then((e=>{e.transaction("categories","readwrite").objectStore("categories").add(t)})),o.categories.forEach((e=>{e.parent==i.id&&(e.parent=t.id)})),o.transactions.forEach((e=>{e.category===i.id&&(e.category=t.id)})),e(t.id).then(r).catch(n)})).catch(n)})))})),Promise.all(i).then(r).catch(n)})).catch(n)})).catch(n)}}))}()})).then((e=>new Promise(((e,t)=>{let r=[],n=[];o.changes.forEach((e=>{r.push(new Promise(((t,r)=>{const o={};o.name=e.name,o.date=Qe(e.date),o.local_amount=e.local_amount,o.local_currency=e.local_currency,o.new_amount=e.new_amount,o.new_currency=e.new_currency,We.encrypt(o).then((r=>{e.blob=r,delete e.name,delete e.date,delete e.local_amount,delete e.local_currency,delete e.new_amount,delete e.new_currency,n.push(e),t()})).catch((e=>{r(e)}))})))})),Promise.all(r).then((o=>{xe({url:a+"/api/v1/changes",method:"POST",headers:{Authorization:"Token "+i},data:n}).then((o=>{n=o.data,r=[],n.forEach((e=>{r.push(new Promise(((t,r)=>{We.decrypt(e.blob).then((n=>{delete e.blob,e=Object.assign({},e,n),Le.connectIndexedDB().then((r=>{r.transaction("changes","readwrite").objectStore("changes").put(e),t()})).catch((e=>{r()}))}))})))})),Promise.all(r).then((t=>{e()})).catch((e=>{t(e)}))}))})).catch((e=>{t(e)}))})))).then((()=>new Promise(((e,t)=>{let r=[],n=[];o.transactions.forEach((e=>{r.push(new Promise(((t,r)=>{const o={};o.name=e.name,o.date=Qe(e.date),o.local_amount=e.local_amount,o.local_currency=e.local_currency,We.encrypt(o).then((r=>{e.blob=r,delete e.name,delete e.date,delete e.local_amount,delete e.local_currency,n.push(e),t()})).catch((e=>{r(e)}))})))})),Promise.all(r).then((o=>{xe({url:a+"/api/v1/debitscredits",method:"POST",headers:{Authorization:"Token "+i},data:n}).then((o=>{n=o.data,r=[],n.forEach((e=>{r.push(new Promise(((t,r)=>{We.decrypt(e.blob).then((n=>{delete e.blob,e=Object.assign({},e,n),Le.connectIndexedDB().then((r=>{r.transaction("transactions","readwrite").objectStore("transactions").put(e),t()})).catch((e=>{r()}))}))})))})),Promise.all(r).then((t=>{e()})).catch((e=>{t(e)}))}))})).catch((e=>{t(e)}))})))).then((()=>{postMessage({uuid:r,type:Ke,account:o.account})})).catch((e=>{console.error(e),postMessage({uuid:r,type:Ke,exception:e})}))}));break;case"ENCRYPTION_KEY_CHANGED":const{url:n,token:o,newCipher:i,oldCipher:a}=t;xe({url:n+"/api/v1/accounts",method:"get",headers:{Authorization:"Token "+o}}).then((function(e){let s=[];const c=[];We.key(a).then((()=>{e.data.forEach((e=>{e.preferences&&s.push(new Promise(((t,r)=>{We.decrypt(""===e.preferences?"{}":e.preferences).then((r=>{delete e.preferences,c.push({id:e.id,preferences:r}),t()}))})))})),Promise.all(s).then((()=>{s=[],We.key(i).then((()=>{c.forEach((e=>{s.push(new Promise(((t,r)=>{We.encrypt(""===e.preferences?"{}":e.preferences).then((r=>{e.preferences=r,t()}))})))})),Promise.all(s).then((e=>{xe({url:n+"/api/v1/accounts",method:"PATCH",headers:{Authorization:"Token "+o},data:c}).then((e=>{postMessage({uuid:r,type:t.type})})).catch((e=>{postMessage({uuid:r,type:t.type,exception:e})}))})).catch((e=>{postMessage({uuid:r,type:t.type,exception:e})}))}))})).catch((e=>{postMessage({uuid:r,type:t.type,exception:e})}))}))})).catch((e=>{postMessage({uuid:r,type:t.type,exception:e})}));break;default:return}}})()})();
//# sourceMappingURL=Accounts.worker.31288430c0cc70f632c5.worker.js.map